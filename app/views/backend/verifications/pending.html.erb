<%= render Components::Window.new("Pending Document Verifications", close_url: backend_root_path, max_width: 1000) do %>
  <div class="padding">
    <div class="flex" style="justify-content: space-between; align-items: center; margin-bottom: 2rem;">
      <h2 style="margin: 0;">Pending Verification (<%= @pending_verifications.total_count %>)</h2>
      <div class="flex" style="gap: 1rem;">
        <%= link_to "All Verifications", backend_verifications_path, class: "button button-secondary" %>
      </div>
    </div>
    <% if @average_hangtime.present? %>
      <h3>Average hangtime: <%= distance_of_time_in_words(0, @average_hangtime) %></h3>
    <% end %>
    <% if @pending_verifications.any? %>
      <div class="grid" style="gap: 1rem;">
        <% @pending_verifications.each do |verification| %>
          <div class="lowered padding">
            <div class="flex" style="justify-content: space-between; align-items: start; margin-bottom: 1rem;">
              <div>
                <h3 style="margin: 0 0 0.5rem 0;">
                  <%= verification.document_type %>
                </h3>
                <p style="margin: 0; color: #666;">
                  <strong><%= verification.identity.first_name %> <%= verification.identity.last_name %></strong>
                  (<%= verification.identity.primary_email %>)
                </p>
                <p style="margin: 0.25rem 0 0 0; color: #666; font-size: 0.9em;">
                  Country: <%= verification.identity.country %> |
                  Uploaded: <%= time_ago_in_words(verification.pending_at || verification.created_at) %> ago
                </p>
              </div>
              <span class="status-pending">
                Pending
              </span>
            </div>
            <div class="flex" style="gap: 0.5rem;">
              <%= link_to "Review", backend_verification_path(verification), class: "button" %>
            </div>
          </div>
        <% end %>
      </div>
      <div style="margin-top: 2rem; text-align: center;">
        <%= paginate @pending_verifications %>
      </div>
    <% else %>
      <div class="lowered padding" style="text-align: center;">
        <p>No documents pending verification</p>
        <p style="color: #666; margin-top: 1rem;">
          <%= link_to "View all verifications", backend_verifications_path, class: "button button-secondary" %>
        </p>
      </div>
    <% end %>
  </div>
<% end %>
